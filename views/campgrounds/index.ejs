<% layout('layouts/boilerplate')%>
<div id="cluster-map"></div>
<div class="container">
	<section class="wrapper">
		<div class="container-fostrap">
			<div>
				<h1 class="heading">All Campgrounds</h1>
			</div>
			<div class="content">
				<div class="container">
					<div class="row">
						<!-- Card -->
						<% for (let campground of campgrounds){%>
						<div class="col-xs-12 col-sm-4">
							<div class="card">
								<%if(campground.images.length) {%>
								<img
									class="img-fluid"
									alt=""
									src="<%=campground.images[0].url%>"
								/>
								<% }else {%>
								<img
									class="img-fluid"
									alt=""
									src="https://res.cloudinary.com/douqbebwk/image/upload/v1600103881/YelpCamp/lz8jjv2gyynjil7lswf4.png"
								/>
								<% } %>
								<div class="card-content">
									<h4 class="card-title">
										<%= campground.title %>
									</h4>
									<p class="card-text">
										<%= campground.description.substring(0,
										200) %>...
									</p>
								</div>
								<div class="card-read-more">
									<a
										class="btn btn-sm btn-dark m-1"
										href="/campgrounds/<%=campground._id%>"
									>
										More Info
									</a>
								</div>
							</div>
						</div>
						<% }%>
						<!-- /Card -->
					</div>
				</div>
			</div>
		</div>
	</section>
</div>
<script>
	const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
	const campgrounds = { features: <%- JSON.stringify(campgrounds) %>}
</script>

<script src="/javascripts/clusterMap.js"></script>
